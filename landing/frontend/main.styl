@require 'frontend'
@require 'frontend/animate/fading_entrances/fadeInDown'
@require 'frontend/animate/fading_entrances/fadeInUp'

breakpoint = 620px

html
  font-size 14px
  @media (max-width breakpoint)
    font-size 11px
  @media (min-width 1200px)
    font-size 15px

footer.root
  position fixed
  bottom 0
  left 0
  right 0
  z-index 2
  background alpha($black, .4)

  transition color .2s

  @media (max-width breakpoint)
    z-index 11
    transition bottom .5s, background .8s
    bottom -100%

    &.open
      bottom 0

  .terminal
    display none

easeInOut = cubic-bezier(.645, .045, .355, 1)
@keyframes bounce-left-scale
  0%, 20%, 50%, 80%, 100%
    transform translate(0, -50%) scale(1)
  40%
    transform translate(-30px, -50%) scale(1.5)
  60%
    transform translate(-15px, -50%) scale(1.5)

@keyframes bounce-left
  0%, 20%, 50%, 80%, 100%
    transform translateX(0)
  40%
    transform translateX(-30px)
  60%
    transform translateX(-15px)


nav.root
  font-family type-fira
  box-shadow none
  transition background .2s
  background alpha($black, .5)

  .brand
    margin-top 0
    transition margin .2s

  a.root-toggle
    display none

  .site-navigation
    position absolute
    z-index 1
    right 0
    top 10px

  .page-navigation
    ul
      delimited-inline-ul('*', 15px)
      margin 12px 0
      top 10px
      width 100%
      padding-right 200px
      @media (max-width 1000px)
        flex-wrap wrap
        li
          margin-right 15px
        li:not(:first-child)
          &:before
            display none

    a.active
      text-transform uppercase
      font-weight bold

  .slide-navigation
    button
      position fixed
      top 50vh
      z-index 90
      padding 20px 2px
      font-size 2em
      transform translateY(-50%)
      background transparent
      color inherit
      &:hover
        background alpha($white, .2)
    button.left
      left 0
    button.right
      right 0
      animation bounce-left-scale 1s 2
      animation-delay 2s

  @media (max-width breakpoint)
    height 44px
    overflow hidden
    transition height .5s easeInOut, background .5s

    a.root-toggle
      display block
      position absolute
      right 0
      top 2px
      height 40px
      width 30px
      margin 0
      z-index 10
      opacity .8
      &:before, &:after
        content ' '
        position absolute
        height 3px
        width 30px
        border-radius 2px
        background white
        right 0
        transform rotate(0) translateY(0)
        transition all .2s
      &:before
        top 12px
      &:after
        bottom 12px

      span
        visibility hidden

    &.open
      background $prussian-blue
      height 100%

      a.root-toggle
        right -8px
        &:before
          transform rotate(45deg) translate(0, 10px)
        &:after
          transform rotate(-45deg) translate(0, -9px)

    div
      display block

    .site-navigation
      padding-top 30px
      position relative

    .slide-navigation
      display none

    .site-navigation, .page-navigation
      ul
        display block
        position relative
        background transparent

      li, ul
        display block
        &:before, &:after
          display none

      a
        font-size 1.5em
        margin 2px -10px
        display block
        color $white
        padding 10px

        &:hover, &:active
          background transparent
          color inherit
          text-transform uppercase

      ul.secondary
        background transparent
        top 0
        padding 0 0 0 10px
        color inherit
        box-shadow none

    .brand
      top 0
      z-index 10
      position absolute

.preload
  position fixed
  width 100vw
  height 100vh
  background #FFF
  color #000
  transform translateX(0)
  opacity 1
  top 0
  z-index 1000
  transition transform .4s, opacity .4s

  &.loaded
    opacity 0
    transform translateX(-100vw)

  div
    width 80%
    top 50%
    position relative
    margin auto
    transform translateY(-50%)
    h1
      position relative
      display inline-block
    img
      height 30px

body
  > main
    cursor -moz-grab
    cursor -webkit-grab
    cursor grab
    overflow hidden
    margin-top 0
    &.panning
      cursor -moz-grabbing
      cursor -webkit-grabbing
      cursor grabbing

  canvas, svg
    position fixed
    top 0
    left 0
    z-index 0

    width 100vw
    height 100vh

slide-count = 7

.slides
  background #EBEBEB
  font-family type-sans-serif
  overflow hidden

  width slide-count * 100vw
  height 100vh
  margin-left 0

  easeInOut = cubic-bezier(.175, .685, .32, 1)
  transition all .5s, background .5s

  position relative
  display flex

  @media (max-width breakpoint)
    height auto

  section
    width 100vw
    height 100vh
    margin 0

    display flex
    flex-grow 0
    flex-shrink 0
    position relative

    z-index 1

    @media (max-width breakpoint)
      height auto
      padding-top 50px
      animation bounce-left 1s 2
      animation-delay 4s

    article
      margin auto
      position relative
      // padding 0 20px

      margin-left auto
      margin-right auto
      position relative
      width 80%

      @media (min-width: 1280px)
        width 1024px

      @media (max-width breakpoint)
        margin 0 auto
        padding 0
        width 80%

      h1, p, blockquote, h2, h3, h4
        max-width 600px

    h1
      margin 0
      position relative
      display inline
    h2
      font-size 3rem
      font-weight 800
      text-transform uppercase
    h3
      font-weight 600
    p
      font-size 1.2rem
      font-weight 300
      line-height 1.5rem

    blockquote
      margin 10px -15px
      padding 0 15px

      font-weight 600
      line-height 1.5em
      font-size 1.2em
      position relative

      &:before
        content 'â€Ÿ'
        position absolute
        left -.4em
        top .2em
        font-size 3em
      cite
        display block
        font-style normal
        font-size 1em
        font-weight 300

    abbr
      font-family $type-mono
      font-size .8em
      font-weight 300

      @media(max-width 768px)
        top 100%
        left 0

    img
      max-height 40px
      max-width 100%

    &.active
      article
        animation fadeInDown .5s


body
  &[has-loaded='true']
    .slides section, nav.root button.left
      animation-play-state paused

  &[slide-active='home']
    nav.root, footer.root
      color #3A405A
      background transparent

      .brand
        margin-top -44px

      a.root-toggle
        &:before, &:after
          background #3A405A

      @media (max-width breakpoint)
        &.open
          color $white
          background $prussian-blue
          a.root-toggle
            &:before, &:after
              background $white
          .brand
            margin-top 0

      button.left
        display none

    .slides
      background #EBEBEB
      color #3A405A

  &[slide-active='ossome']
    .slides
      background #004E98
      color #EBEBEB

  &[slide-active='dataweave']
    .slides
      background #0E122D
      color #EBEBEB

  &[slide-active='design']
    .slides
      background #1d2b64
      color #C8CCC6

      h2
        color #F4CE4B

  &[slide-active='programming']
    .slides
      background #21344F
      color #EBEBEB

      p
        font-family type-fira

        span.op
          color #EB5432
        span.kw
          color #FED43F
        span.tag
          color #8DCEE2
        span.num
          color #5EBC4E

  &[slide-active='debugging']
    .slides
      background #212412
      color #EBEBEB

  &[slide-active='sponsors']
    color = #2C458D
    nav.root, footer.root
      background alpha(color, 1)
    .slides
      background #FFFFFF
      color color
